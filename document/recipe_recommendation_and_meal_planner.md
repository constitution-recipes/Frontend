# 맞춤형 레시피 추천 & 식단 플래너(캘린더) 기능 명세

## 1. 개요

ChiDiet는 한의학 체질 진단, 사용자 선호, 건강 목표, 라이프스타일을 반영하여  
개인 맞춤형 레시피 추천과 식단 플래너(캘린더 기반) 기능을 제공합니다.  
이 기능은 사용자의 지속적인 건강 관리와 식습관 개선을 돕고,  
실제 생활에 밀착된 식단 계획 및 실행을 지원합니다.

---

## 2. 맞춤형 레시피 추천

### 2.1 주요 목적

- 체질, 알레르기, 선호 식재료, 건강 상태, 이전 대화 이력 등 다양한 요소를 반영한 레시피 추천  
- 다이어트, 영양 균형, 특정 건강 목표(면역, 소화, 체중 등)에 최적화된 레시피 제공  
- 사용자의 요청(난이도, 조리기구, 인원수, 계절, 이벤트 등)에 따라 다양한 레시피 큐레이션

### 2.2 주요 기능

- **체질 기반 추천**: 8체질 진단 결과에 따라 최적 레시피 자동 추천  
- **개인화 필터**: 알레르기, 종교, 선호/비선호 식재료, 영양 목표 등 반영  
- **상황별 추천**: 다이어트, 운동, 명절/이벤트, 간편식 등 상황별 큐레이션  
- **영양 정보 제공**: 각 레시피별 칼로리, 단백질, 탄수화물, 지방, 나트륨 등 상세 영양 정보 표시  
- **카드/리스트 뷰**: 추천 결과를 시각적으로 카드 또는 리스트 형태로 제공  
- **레시피 상세**: 조리법, 재료, 영양소, 추천 이유, 관련 팁 등 상세 정보 제공  
- **레시피 저장/공유**: 즐겨찾기, 내보내기(공유, PDF 등), 장바구니 연동

### 2.3 데이터 구조 예시
```js
const recommendedRecipes = [
  {
    id: 'r-001',
    title: '금양체질 맞춤 닭가슴살 샐러드',
    description: '금양체질에 적합한 저염·고단백 샐러드로 면역력 강화와 체중 관리에 도움을 줍니다.',
    ingredients: ['닭가슴살', '양상추', '방울토마토', '아보카도', '올리브 오일', '레몬즙', '소금', '후추'],
    steps: [
      '닭가슴살을 삶아 한입 크기로 찢습니다.',
      '야채와 아보카도를 먹기 좋게 썹니다.',
      '모든 재료를 볼에 담고 올리브 오일, 레몬즙, 소금, 후추로 간을 맞춥니다.',
      '접시에 담아 완성합니다.'
    ],
    prepTime: '10분',
    cookTime: '15분',
    servings: '1인분',
    nutritionalInfo: '칼로리 220kcal, 단백질 28g, 탄수화물 8g, 지방 9g, 나트륨 180mg',
    image: 'https://placekitten.com/400/300',
    tags: ['저염식', '고단백', '간편식']
  }
];
```

---

## 3. 식단 플래너 & 캘린더

### 3.1 주요 목적

- 일/주/월 단위로 자동 식단 생성 및 관리  
- 캘린더 기반 UI로 식단 계획, 수정, 확인, 히스토리 관리  
- 외부 캘린더(구글, 네이버 등) 연동 및 알림 기능 지원

### 3.2 주요 기능

- **자동 식단 생성**: 체질, 건강 목표, 일정, 선호/비선호, 영양 밸런스 등을 반영해 일/주/월 식단 자동 추천  
- **캘린더 뷰**: 달력 기반으로 식단을 한눈에 확인, 일별/주별/월별 뷰 지원  
- **드래그&드롭**: 레시피/식단 카드의 드래그&드롭으로 손쉬운 식단 편집  
- **식단 상세**: 각 날짜별 아침/점심/저녁/간식 등 식단 상세 정보 제공  
- **영양소 집계**: 일/주/월 단위로 칼로리, 단백질, 탄수화물, 지방 등 자동 합산  
- **장바구니 연동**: 식단에 포함된 재료를 자동으로 장바구니에 추가  
- **외부 캘린더 연동**: 구글/네이버 등 외부 캘린더와 연동하여 일정 관리 및 알림 제공  
- **식단 내보내기/공유**: PDF, 이미지, 캘린더 파일 등 다양한 포맷으로 내보내기

### 3.3 데이터 구조 예시
```js
const mealPlanner = {
  userId: 'u-001',
  week: '2024-06-10',
  days: [
    {
      date: '2024-06-10',
      meals: [
        { type: '아침', recipeId: 'r-001', title: '금양체질 맞춤 닭가슴살 샐러드', image: 'https://placekitten.com/400/300' }
      ],
      totalNutrition: { calories: 460, protein: 33, carbs: 38, fat: 21, sodium: 180 }
    }
  ]
};
```

---

## 4. UI/UX 및 컴포넌트 구조

- **레시피 추천 페이지**: `/src/app/recipes/page.tsx`  
  - 카드/리스트 뷰, 필터/검색, 상세 모달, 저장/공유/장바구니 버튼
- **식단 플래너 페이지**: `/src/app/planner/page.tsx`  
  - 캘린더 뷰, 드래그&드롭, 식단 상세, 영양소 집계, 외부 캘린더 연동
- **주요 컴포넌트**:  
  - `RecipeCard`, `RecipeList`, `RecipeDetailModal`  
  - `MealCalendar`, `MealDayCard`, `MealEditDialog`, `NutritionSummary`, `AddToCartButton`
- **반응형 디자인**: Tailwind CSS 기반, 모바일/태블릿 대응  
- **UX 흐름**: 에러/로딩/빈 상태 처리, 접근성, 다크모드 지원

---

## 5. API 및 저장 구조

- **레시피 추천**: `POST /api/v1/recipes/recommend` (체질/선호/상황 등 파라미터)  
- **식단 플래너**: `GET/POST/PUT /api/v1/planner` (주간/월간 식단 관리)  
- **장바구니 연동**: `POST /api/v1/cart` (식단 기반 재료 자동 추가)  
- **외부 캘린더 연동**: OAuth 및 캘린더 API 활용

---

## 6. 확장 및 연동

- FastAPI 백엔드, RAG 기반 레시피 추천, MongoDB 식단/히스토리 저장  
- 향후 챗봇, 장바구니, 알림, 건강 데이터(운동/수면 등)와 연계 가능 